(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){},196:function(e){e.exports={version:8,name:"Basic",metadata:{"mapbox:autocomposite":!0},sources:{mapbox:{url:"mapbox://mapbox.mapbox-streets-v7",type:"vector"}},sprite:"mapbox://sprites/mapbox/basic-v8",glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"#dedede"},interactive:!0},{id:"landuse_overlay_national_park",type:"fill",source:"mapbox","source-layer":"landuse_overlay",filter:["==","class","national_park"],paint:{"fill-color":"#d2edae","fill-opacity":.75},interactive:!0},{id:"landuse_park",type:"fill",source:"mapbox","source-layer":"landuse",filter:["==","class","park"],paint:{"fill-color":"#d2edae"},interactive:!0},{id:"waterway",type:"line",source:"mapbox","source-layer":"waterway",filter:["all",["==","$type","LineString"],["in","class","river","canal"]],paint:{"line-color":"#a0cfdf","line-width":{base:1.4,stops:[[8,.5],[20,15]]}},interactive:!0},{id:"water",type:"fill",source:"mapbox","source-layer":"water",paint:{"fill-color":"#a0cfdf"},interactive:!0},{id:"building",type:"fill",source:"mapbox","source-layer":"building",paint:{"fill-color":"#d6d6d6"},interactive:!0},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","tunnel"]]],type:"line",source:"mapbox",id:"tunnel_minor",paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]},"line-dasharray":[.36,.18]},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","tunnel"]]],type:"line",source:"mapbox",id:"tunnel_major",paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]},"line-dasharray":[.28,.14]},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["in","structure","none","ford"]]],type:"line",source:"mapbox",id:"road_minor",paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["in","structure","none","ford"]]],type:"line",source:"mapbox",id:"road_major",paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_minor case",paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_major case",paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_minor",paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_major",paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["<=","admin_level",2],["==","maritime",0]]],type:"line",source:"mapbox",id:"admin_country",paint:{"line-color":"#8b8a8a","line-width":{base:1.3,stops:[[3,.5],[22,15]]}},"source-layer":"admin"},{interactive:!0,minzoom:5,layout:{"icon-image":"{maki}-11","text-offset":[0,.5],"text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":8,"text-anchor":"top","text-size":11,"icon-size":1},filter:["all",["==","$type","Point"],["all",["==","scalerank",1],["==","localrank",1]]],type:"symbol",source:"mapbox",id:"poi_label",paint:{"text-color":"#666","text-halo-width":1,"text-halo-color":"rgba(255,255,255,0.75)","text-halo-blur":1},"source-layer":"poi_label"},{interactive:!0,layout:{"symbol-placement":"line","text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-transform":"uppercase","text-letter-spacing":.1,"text-size":{base:1.4,stops:[[10,8],[20,14]]}},filter:["all",["==","$type","LineString"],["in","class","motorway","primary","secondary","tertiary","trunk"]],type:"symbol",source:"mapbox",id:"road_major_label",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":2},"source-layer":"road_label"},{interactive:!0,minzoom:8,layout:{"text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":6,"text-size":{stops:[[6,12],[12,16]]}},filter:["all",["==","$type","Point"],["in","type","town","village","hamlet","suburb","neighbourhood","island"]],type:"symbol",source:"mapbox",id:"place_label_other",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"place_label"},{interactive:!0,layout:{"text-field":"{name_en}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-max-width":10,"text-size":{stops:[[3,12],[8,16]]}},maxzoom:16,filter:["all",["==","$type","Point"],["==","type","city"]],type:"symbol",source:"mapbox",id:"place_label_city",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"place_label"},{interactive:!0,layout:{"text-field":"{name_en}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-max-width":10,"text-size":{stops:[[3,14],[8,22]]}},maxzoom:12,filter:["==","$type","Point"],type:"symbol",source:"mapbox",id:"country_label",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"country_label"}]}},204:function(e,t,a){e.exports=a(400)},399:function(e,t,a){},400:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(11),l=a.n(i),o=a(429),c=(a(209),a(56)),s=a(178),u=a(14),p=a(15),m=a(18),d=a(16),h=a(19),f=a(424),b=a(432),g=a(77),v=a(103),y=(a(140),a(410)),E=a(411),O=a(412),k=a(408),w=a(428),C=a(425),j=(a(71),a(95)),S=a(431),x=a(409),_=a(29),N=a(401),I=a(402),M=a(403),D=a(404),P=a(405),T=a(406),A=a(407),F=a(180),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){var t;a.setState((t={},Object(_.a)(t,e.target.name,e.target.value),Object(_.a)(t,"error",void 0),t))},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.login)("signin",a.state).catch(function(e){401===e.code&&(a.setState({error:e.text}),console.log("Oups, une erreur s'est produite"))})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,i=this.props.displayModal;return r.a.createElement(N.a,{onSubmit:this.handleSubmit},r.a.createElement(I.a,null,r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Email"),r.a.createElement(P.a,{type:"email",name:"email",placeholder:"Indiquez votre email",value:t,onChange:this.handleChange,invalid:n})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Mot de passe"),r.a.createElement(P.a,{type:"password",name:"password",placeholder:"Indiquez votre mot de passe",value:a,onChange:this.handleChange,invalid:n}),r.a.createElement(T.a,null,n))),r.a.createElement(A.a,null,r.a.createElement(F.a,{color:"primary",type:"submit",onClick:this.handleSubmit},"Connexion"),r.a.createElement(F.a,{color:"secondary",onClick:i},"Annuler")))}}]),t}(n.Component),z=Object(b.a)(L),U=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={firstname:"",lastname:"",email:"",password:"",repeatPassword:""},a.handleChange=function(e){var t;a.setState((t={},Object(_.a)(t,e.target.name,e.target.value),Object(_.a)(t,"verif".concat(e.target.name),void 0),t))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password,i=t.repeatPassword;if(n.match(/^[\w-.]+@[\w-]+\.\w+$/g))if(r.length<8)a.setState({verifpassword:!0});else if(i!==r)a.setState({verifrepeatPassword:!0});else{var l=Object.assign({},a.state);delete l.repeatPassword,(0,a.props.login)("signup",l).then(function(e){console.log(e)}).catch(function(){console.log("Oups, une erreur s'est produite")})}else a.setState({verifemail:!0})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.email,i=e.password,l=e.repeatPassword,o=e.verifemail,c=e.verifpassword,s=e.verifrepeatPassword,u=this.props.displayModal;return r.a.createElement(N.a,{onSubmit:this.handleSubmit},r.a.createElement(I.a,null,r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Nom"),r.a.createElement(P.a,{type:"text",name:"lastname",onChange:this.handleChange,value:a})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Pr\xe9nom"),r.a.createElement(P.a,{type:"text",name:"firstname",onChange:this.handleChange,value:t})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Email"),r.a.createElement(P.a,{type:"email",name:"email",onChange:this.handleChange,value:n,invalid:o}),r.a.createElement(T.a,null,"Ce n\u2018est pas une adresse valide")),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Mot de passe"),r.a.createElement(P.a,{type:"password",name:"password",placeholder:"8 caract\xe8res minimum",onChange:this.handleChange,value:i,invalid:c}),r.a.createElement(T.a,null,"Votre mot de passe doit faire plus de 8 caract\xe8res")),r.a.createElement(M.a,null,r.a.createElement(P.a,{type:"password",name:"repeatPassword",placeholder:"R\xe9p\xe9tez votre mot de passe",onChange:this.handleChange,value:l,invalid:s}),r.a.createElement(T.a,null,"Vos mots de passes ne correspondent pas"))),r.a.createElement(A.a,null,r.a.createElement(F.a,{color:"primary",type:"submit",onClick:this.handleSubmit},"Inscription"),r.a.createElement(F.a,{color:"secondary",onClick:u},"Annuler")))}}]),t}(n.Component),V=Object(b.a)(U),Q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,registerByDefault:!0},a.displayModal=function(){a.setState(function(e){return{modal:!e.modal}})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.modal,n=t.registerByDefault,i=this.props,l=i.login,o=i.logout,c=i.isConnected,s=r.a.createElement(w.a,null,r.a.createElement(w.a.Item,null,r.a.createElement(k.a,{to:"/account"},"Mon compte")),r.a.createElement(w.a.Item,null,r.a.createElement(k.a,{to:"/",onClick:o},"D\xe9connexion")));return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(C.a,{overlay:s,id:"dropdown"},r.a.createElement("a",{className:"ant-dropdown-link",href:"#g"},r.a.createElement(j.a,{icon:"user",className:"user-icon"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{onClick:this.displayModal,className:"auth-text"},"Authentification"),r.a.createElement(S.a,{isOpen:a,fade:!1,toggle:this.displayModal},r.a.createElement("div",{className:"modal-header"},r.a.createElement(x.a,{className:!0===n?"active":"",onClick:function(){return e.setState({registerByDefault:!0})}},"Inscription"),r.a.createElement(x.a,{className:!0===n?"":"active",onClick:function(){return e.setState({registerByDefault:!1})}},"Connexion")),n?r.a.createElement(V,{displayModal:this.displayModal,modal:a,login:l}):r.a.createElement(z,{displayModal:this.displayModal,modal:a,login:l}))))}}]),t}(r.a.Component),B=a(132),$=a.n(B),H=a(192),R="http://geoscout.fr:5555/";function q(e){return G.apply(this,arguments)}function G(){return(G=Object(H.a)($.a.mark(function e(t){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}if(204!==t.status){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return e.abrupt("return",Promise.resolve(t.json()));case 4:return e.t0=Promise,e.t1=t.status,e.next=8,t.text();case 8:return e.t2=e.sent,e.t3={code:e.t1,text:e.t2},e.abrupt("return",e.t0.reject.call(e.t0,e.t3));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e,t,a){var n={method:t,headers:{"Content-Type":"application/json"}};return localStorage.getItem("token")&&(n.headers.authorization="Bearer ".concat(localStorage.getItem("token"))),a&&(n.body=JSON.stringify(a)),fetch(R+e,n).then(q)}var W={get:function(e){return J(e,"GET")},post:function(e,t){return J(e,"POST",t)},put:function(e,t){return J(e,"PUT",t)},delete:function(e){return J(e,"DELETE")}},Y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.handleChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=a.state.name,t=a.props.displayModal;W.post("circuit",{name:e}).then(function(e){t(),a.props.history.push("/circuit/".concat(e.id_circuit))}).catch(function(){console.log("Oups, une erreur s'est produite")})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.name,t=this.props,a=t.modal,n=t.displayModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{isOpen:a,fade:!1,toggle:n},r.a.createElement(x.a,null,"Nouveau circuit"),r.a.createElement(I.a,null,r.a.createElement(N.a,null,r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Nom"),r.a.createElement(P.a,{type:"text",name:"name",value:e,onChange:this.handleChange})))),r.a.createElement(A.a,null,r.a.createElement(F.a,{color:"primary",onClick:this.handleSubmit},"Cr\xe9er"),r.a.createElement(F.a,{color:"secondary",onClick:n},"Annuler"))))}}]),t}(n.Component),X=Object(b.a)(Y),Z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1},a.displayModal=function(){a.setState(function(e){return{modal:!e.modal}})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.modal,t=this.props,a=t.isConnected,n=t.login,i=t.logout,l=r.a.createElement(w.a,null,r.a.createElement(w.a.Item,null,r.a.createElement(k.a,{to:"/circuits"},"Cr\xe9\xe9s")),r.a.createElement(w.a.Item,null,r.a.createElement(k.a,{to:"/achievements"},"Accomplis")),r.a.createElement(w.a.Item,null,r.a.createElement(k.a,{to:"/todo"},"Favoris")),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,null,r.a.createElement("p",{onClick:this.displayModal,className:"create-circuit"},"Cr\xe9er un circuit")));return r.a.createElement("div",null,r.a.createElement(y.a,{expand:"md",fixed:"top"},r.a.createElement(k.a,{to:"/"},r.a.createElement("img",{src:"/img/logoGeoScoutWhite.png",className:"logo",alt:"GeoScout"})),a?r.a.createElement(E.a,{navbar:!0},r.a.createElement(O.a,{className:"ml-auto",navbar:!0},r.a.createElement(C.a,{overlay:l,id:"dropdown"},r.a.createElement("a",{className:"ant-dropdown-link",href:"#g"},"Circuits")),r.a.createElement(Q,{isConnected:a,logout:i}))):r.a.createElement(E.a,{navbar:!0},r.a.createElement(O.a,{className:"flex-end",navbar:!0},r.a.createElement(Q,{isConnected:a,login:n})))),r.a.createElement(X,{displayModal:this.displayModal,modal:e}))}}]),t}(r.a.Component),K=a(193),ee=a.n(K),te=a(80),ae=a(195),ne=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.index,n=8,i={cursor:"pointer",fill:this.props.color,stroke:"none"};return 11===a?n=6:a>9?n=5:1!==a&&7!==a||(n=9),r.a.createElement("svg",{height:25,viewBox:"0 0 24 24",style:Object(ae.a)({},i),onClick:t},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}),r.a.createElement("text",{x:n,y:15,fill:"white",fontSize:13},a))}}]),t}(n.PureComponent),re=a(196),ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).centerStep=function(e){var t=a.props,n=t.viewport,r=t.changeViewport;n.latitude=e.latitude,n.longitude=e.longitude+.03,n.zoom=12,r(n)},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.steps,n=t.circuits,i=t.onClickMap,l=t.onClickMarker,o=t.className,c=t.viewport,s=t.userPosition,u=t.changeViewport;return r.a.createElement("div",{className:o},r.a.createElement(te.b,Object.assign({mapboxApiAccessToken:"pk.eyJ1IjoidHVudGVyZmluZ2VyIiwiYSI6ImNqcncxOTkwdDA3YW00M3BrY3A0MTAyd3kifQ.Mby6nOzqK6Tkzm1CwRfdDw"},c,{mapStyle:re,onViewportChange:u,onClick:i}),s&&r.a.createElement(te.a,{latitude:s.latitude,longitude:s.longitude,offsetLeft:-10,offsetTop:-20},r.a.createElement(ne,{color:"#cc0000"})),a&&a.map(function(t){return r.a.createElement(te.a,{key:t.id_step,latitude:t.latitude,longitude:t.longitude,offsetLeft:-11,offsetTop:-25},r.a.createElement(ne,{color:"#1f7a1f",index:t.order,onClick:function(){l(t),e.centerStep(t)}}))}),n&&n.map(function(e,t){return null!=e&&e.Steps[0].latitude&&e.Steps[0].longitude?r.a.createElement(te.a,{key:t,latitude:e.Steps[0].latitude,longitude:e.Steps[0].longitude,offsetLeft:-11,offsetTop:-25},r.a.createElement(ne,{color:"#0066cc",onClick:function(){return l(e.id_circuit)}})):null})))}}]),t}(r.a.Component),le=a(433),oe=a(413),ce=a(414),se=a(415),ue=a(430),pe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={tooltipPublicationOpen:!1,tooltipLevelOpen:!1},a.publishedStatusToggler=function(){a.setState({tooltipPublicationOpen:!a.state.tooltipPublicationOpen})},a.levelToggler=function(){a.setState({tooltipLevelOpen:!a.state.tooltipLevelOpen})},a.test=function(){},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.id_circuit,n=t.name,i=t.description,l=t.length,o=t.onHome,c=t.duration,s=t.version,u=t.published,p=t.level,m=t.history,d=this.state,h=d.tooltipPublicationOpen,f=d.tooltipLevelOpen;switch(p){case"1":e="medium";break;case"2":e="hard";break;default:e="easy"}var b=null!=i&&"".concat(i.replace(/<(.|\n)*?>/g,"").substring(0,50),"...");return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"list-item",onClick:function(){return o?m.push("detail/".concat(a)):m.push("circuit/".concat(a))}},r.a.createElement("h3",{className:"item-name"},n),b,l&&l>0&&null!==l?r.a.createElement("p",{className:"bold-info-circuit"},l," km"):r.a.createElement("p",{className:"bold-info-circuit"},"- 1km"),c&&l>0&&null!==c?r.a.createElement("p",{className:"bold-info-circuit"},c&&"".concat(c," heures")):r.a.createElement("p",{className:"bold-info-circuit"},"- 1heure"),r.a.createElement("p",{className:"version-item"},s>=0&&"Version : ".concat(s)),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{placement:"top",isOpen:h,autohide:!1,target:"published".concat(a),toggle:this.publishedStatusToggler},!0===u?"Publi\xe9":"Non-publi\xe9"),r.a.createElement(j.a,{id:"published".concat(a),icon:"align-justify",className:"published-item",color:!0===u?"#27ae60":"white"})),r.a.createElement(ue.a,{placement:"top",isOpen:f,autohide:!1,target:"level".concat(a),toggle:this.levelToggler},"Difficult\xe9 : ".concat(e)),r.a.createElement("span",{className:"level-item ".concat(e),id:"level".concat(a)})))}}]),t}(n.Component),me=Object(b.a)(pe),de=function(e){var t=e.items,a=void 0===t?[]:t,n=e.onHome;return r.a.createElement("ul",{className:"item-wrapper"},a.map(function(e){return r.a.createElement(me,Object.assign({key:e.id_circuit},e,{onHome:n}))}))},he=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={dropdownOpen:!1,filter:"Tous",circuits:[]},a.toggle=function(){var e=a.state.dropdownOpen;a.setState({dropdownOpen:!e})},a.onFilterClick=function(e){a.setState({filter:e.target.name})},a.componentDidMount=function(){var e=a.props,t=e.onHome,n=e.circuits;t?a.setState({circuits:n}):W.get("my-circuits").then(function(e){a.setState({circuits:e})}).catch(function(){console.log(a.props)})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.dropdownOpen,a=e.filter,n=e.circuits,i=this.props.onHome,l="Publi\xe9s"===a;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-circuits-header"},i?r.a.createElement("h1",null,"Circuits environnants"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Circuits cr\xe9\xe9s"),r.a.createElement("div",{className:"header-buttons"},r.a.createElement(le.a,{direction:"left",className:"button-dropdown",isOpen:t,toggle:this.toggle},r.a.createElement(oe.a,{caret:!0,color:"info"},a),r.a.createElement(ce.a,null,r.a.createElement(se.a,{name:"Tous",onClick:this.onFilterClick},"Tous"),r.a.createElement(se.a,{name:"Publi\xe9s",onClick:this.onFilterClick},"Publi\xe9s"),r.a.createElement(se.a,{name:"Non-publi\xe9s",onClick:this.onFilterClick},"Non-publi\xe9s")))))),"Tous"===a?r.a.createElement(de,{items:n,onHome:i}):r.a.createElement(de,{items:n.filter(function(e){return e.published===l})}))}}]),t}(n.Component),fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={circuits:[],value:!1,onHome:!0,viewport:{width:"100%",height:window.innerHeight-50,latitude:48.582651,longitude:7.749534,distance:30,zoom:12}},a.getCircuits=function(){var e=a.state.viewport,t={user_longitude:e.longitude,user_latitude:e.latitude,distance:e.distance};W.post("circuit/nearby",t).then(function(e){a.setState({circuits:e})}).catch(function(){console.log("Oups, une erreur s'est produite")})},a.changeViewport=function(e){a.setState({viewport:e})},a.onClickItem=function(e){var t=a.props.history;e&&t.push("detail/".concat(e))},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a=e.state.viewport;a.latitude=t.coords.latitude,a.longitude=t.coords.longitude,e.setState({viewport:a,userPosition:t.coords})}),this.getCircuits()}},{key:"render",value:function(){var e=this,t=this.state,a=t.circuits,n=t.value,i=t.onHome,l=t.viewport,o=t.userPosition;return r.a.createElement(r.a.Fragment,null,!1===n?r.a.createElement(ie,{className:"map",circuits:a,viewport:l,userPosition:o,changeViewport:this.changeViewport,onClickMarker:this.onClickItem}):r.a.createElement(he,{onHome:i,circuits:a}),r.a.createElement("div",{className:"toggle-button"},r.a.createElement("p",null,"Liste"),r.a.createElement(ee.a,{value:n||!1,onToggle:function(t){e.setState({value:!t})}})))}}]),t}(n.Component),be=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Mon compte"))}}]),t}(n.Component),ge=a(66),ve=function(e){var t=e.step,a=e.onClickItem,n=e.stepFocus;return r.a.createElement(ge.b,{draggableId:t.id_step,index:t.order},function(e){return r.a.createElement("li",Object.assign({className:"step-wrapper-item ".concat(n&&t.id_step===n.id_step&&"focus-step"),onClick:function(){return a(t)},ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement("div",null,r.a.createElement("span",{className:"step-name"},t.name)),r.a.createElement("span",{className:"order-item"},t.order))})},ye=function(e){var t=e.items,a=void 0===t?[]:t,n=e.onClickItem,i=e.stepFocus;return r.a.createElement(ge.c,{droppableId:"drop-step",type:"STEP"},function(e,t){return r.a.createElement("ul",Object.assign({className:"step-wrapper",ref:e.innerRef,style:{backgroundColor:t.isDraggingOver&&"#65D8C1"}},e.droppableProps),a.map(function(e){return r.a.createElement(ve,{key:e.order,step:e,onClickItem:n,stepFocus:i})}),e.placeholder)})},Ee=a(427),Oe=a(98),ke=a.n(Oe),we=(a(177),a(5)),Ce=a.n(we),je=a(420),Se=a(421),xe=a(416),_e=a(417),Ne=a(418),Ie=a(419),Me=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.activeTab,a=e.handleChangeQuestion,n=this.props.items[t]?this.props.items[t]:"",i=n.wording,l=n.response;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{activeTab:t},r.a.createElement(_e.a,{tabId:t},r.a.createElement(Ne.a,null,r.a.createElement(Ie.a,{sm:"12"},r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Intitul\xe9 de la question"),r.a.createElement(P.a,{type:"textarea",name:"wording",value:i||"",onChange:function(e){return a(e,t)}})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"R\xe9ponse"),r.a.createElement(P.a,{type:"textarea",name:"response",value:l||"",onChange:function(e){return a(e,t)}})))))))}}]),t}(r.a.Component),De=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"0"},a.toggle=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeTab,a=this.props,n=a.Questions,i=a.handleChangeQuestion;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{tabs:!0},r.a.createElement(je.a,null,r.a.createElement(Se.a,{className:Ce()({active:"0"===t}),onClick:function(){e.toggle("0")}},"Facile")),r.a.createElement(je.a,null,r.a.createElement(Se.a,{className:Ce()({active:"1"===t}),onClick:function(){e.toggle("1")}},"Interm\xe9diaire")),r.a.createElement(je.a,null,r.a.createElement(Se.a,{className:Ce()({active:"2"===t}),onClick:function(){e.toggle("2")}},"Difficile"))),r.a.createElement(Me,{items:n,activeTab:t,handleChangeQuestion:i}))}}]),t}(r.a.Component),Pe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",description:"",instruction:"",validation:!1,Questions:[]},a.modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},a.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],a.handleChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.handleRichTextChange=function(e){a.setState({description:e})},a.handleChangeQuestion=function(e,t){var n=e.target,r=n.name,i=n.value;a.setState(function(e){return e.Questions[t][r]=i,{Questions:e.Questions}})},a.handleCheckboxChange=function(e){a.setState({validation:e.target.checked})},a.handleSubmit=function(){var e=a.state,t=a.props,n=t.displayUpdateStep,r=t.updateStep,i=t.alert;r(e).then(function(){n(),i.success("Etape mise \xe0 jour")}).catch(function(){return i.error("Oups, une erreur s'est produite")})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.step;e.step!==t&&t&&this.setState(Object.assign({},t,{description:t.description||"",instruction:t.instruction||"",validation:t.validation||!0,Questions:t.Questions&&0!==t.Questions.length?t.Questions:[{wording:"",response:"",type_of:1,points:5,difficulty:1},{wording:"",response:"",type_of:1,points:10,difficulty:2},{wording:"",response:"",type_of:1,points:15,difficulty:3}]}))}},{key:"render",value:function(){var e=this.state,t=e.id_step,a=e.name,n=e.description,i=e.instruction,l=e.validation,o=e.Questions,c=this.props,s=c.show,u=c.displayUpdateStep,p=c.removeStep;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s?"update-step":"hidden-update-step"},r.a.createElement("div",{className:"update-title"},r.a.createElement("h3",null,"Modification de l'\xe9tape")),r.a.createElement(N.a,{className:"update-form",onSubmit:function(e){return e.preventDefault()}},r.a.createElement(M.a,null,r.a.createElement(D.a,{id:"scroll-top-step"},"Nom"),r.a.createElement(P.a,{type:"text",name:"name",value:a,onChange:this.handleChange})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Description"),r.a.createElement(ke.a,{className:"rich-text-editor",theme:"snow",modules:this.modules,formats:this.formats,value:n,onChange:this.handleRichTextChange})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Instruction de transit"),r.a.createElement(P.a,{type:"textarea",name:"instruction",value:i,onChange:this.handleChange})),r.a.createElement(Ee.a,{name:"validation",value:l,onChange:this.handleCheckboxChange},"Validation par position GPS"),r.a.createElement(De,{Questions:o,handleChangeQuestion:this.handleChangeQuestion}),r.a.createElement("div",{className:"update-buttons"},r.a.createElement(F.a,{type:"submit",color:"info",onClick:this.handleSubmit},"Modifier"),r.a.createElement(F.a,{color:"danger",onClick:function(){return p(t)}},"Supprimer"),r.a.createElement(F.a,{color:"secondary",onClick:u},"Annuler")))))}}]),t}(n.Component),Te=Object(c.c)()(Pe),Ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",description:"",length:"",duration:""},a.modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},a.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],a.handleChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.handleRichTextChange=function(e){a.setState({description:e})},a.handleSubmit=function(){var e=a.state,t=e.name,n=e.description,r=a.props,i=r.displayUpdateCircuit,l=r.alert;(0,r.updateCircuit)({id_circuit:a.props.circuit.id_circuit,name:t||null,description:n||null}).then(function(){i(),l.success("Circuit mis \xe0 jour")}).catch(function(){return console.log("Oups, une erreur s'est produite")})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.circuit;e.circuit!==t&&t&&this.setState(Object.assign({},t,{description:t.description||"",instruction:t.instruction||"",length:t.length||"",duration:t.duration||""}))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,n=e.length,i=e.duration,l=this.props,o=l.show,c=l.displayUpdateCircuit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o?"update-circuit":"hidden-update-circuit"},r.a.createElement("div",{className:"update-title"},r.a.createElement("h3",null,"Modification du circuit")),r.a.createElement(N.a,{className:"update-form"},r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Nom"),r.a.createElement(P.a,{type:"text",name:"name",value:t,onChange:this.handleChange})),r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Description"),r.a.createElement(ke.a,{className:"rich-text-editor",theme:"snow",modules:this.modules,formats:this.formats,value:a,onChange:this.handleRichTextChange})),i>0&&r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Dur\xe9e estim\xe9e"),r.a.createElement("p",null,"".concat(i," heure(s)"))),n>0&&r.a.createElement(M.a,null,r.a.createElement(D.a,null,"Distance \xe0 vol d\u2018oiseau"),r.a.createElement("p",null,"".concat(n," km"))),r.a.createElement("div",{className:"update-buttons"},r.a.createElement(F.a,{color:"info",onClick:this.handleSubmit},"Modifier"),r.a.createElement(F.a,{color:"secondary",onClick:c},"Annuler")))))}}]),t}(n.Component),Fe=Object(c.c)()(Ae),Le=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={circuit:{},steps:[],stepFocus:[],circuitIsDisplayed:!1,stepIsDisplayed:!1,viewport:{width:"100%",height:window.innerHeight-50,latitude:48.582651,longitude:7.749534,distance:30,zoom:12}},a.changeViewport=function(e){a.setState({viewport:e})},a.onClickItem=function(e){document.getElementById("scroll-top-step").scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),a.setState({stepFocus:e,stepIsDisplayed:!0,circuitIsDisplayed:!1})},a.handleClickMap=function(e){var t=a.state.circuit,n={name:"Etape",longitude:e.lngLat[0],latitude:e.lngLat[1],id_circuit:t.id_circuit};W.post("step",n).then(function(e){a.setState(function(t){return t.steps.push(e),{steps:t.steps}})}).catch(function(){console.log("Oups, une erreur s'est produite")})},a.removeStep=function(e){var t=a.state.circuit;W.delete("step/".concat(t.id_circuit,"/").concat(e)).then(function(){a.setState(function(t){var a=t.steps.findIndex(function(t){return t.id_step===e});return t.steps.splice(a,1),t.steps.forEach(function(e,t){t>=a&&e.order--}),{steps:t.steps}}),a.displayUpdateStep()}).catch(function(){console.log("Oups, une erreur s'est produite")})},a.updateStep=function(e){return W.put("step/".concat(e.id_step),{step:e}).then(function(){a.setState(function(t){var a=t.steps.findIndex(function(t){return t.id_step===e.id_step});t.steps[a]=e})})},a.updateCircuit=function(e){return W.put("circuit/".concat(e.id_circuit),e).then(function(){a.setState({circuit:e})})},a.displayUpdateCircuit=function(){a.setState(function(e){return{circuitIsDisplayed:!e.circuitIsDisplayed,stepIsDisplayed:!1,stepFocus:null}})},a.displayUpdateStep=function(){a.setState(function(e){return{stepIsDisplayed:!e.stepIsDisplayed,circuitIsDisplayed:!1,stepFocus:null}})},a.dragEnd=function(e){if(e.destination){var t=e.source.index,n=e.destination.index,r=a.state.circuit.id_circuit;a.changeStepOrder(t,n),W.put("step-order",{id_circuit:r,previous:t,new:n}).then(function(){return null}).catch(function(){a.changeStepOrder(n,t),console.log("Oups, une erreur s'est produite")})}},a.changeStepOrder=function(e,t){a.setState(function(a){var n=a.steps.map(function(a){return a.order===parseInt(e)?a.order=t:t<=a.order&&a.order<e?a.order+=1:a.order>e&&a.order<=t&&(a.order-=1),a});return n.sort(function(e,t){return e.order-t.order}),{steps:n}})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t&&W.get("download-circuit/".concat(t)).then(function(a){var n=a.Steps[0],r=n.longitude,i=n.latitude,l=e.state.viewport;l.latitude=i,l.longitude=r,a.Steps.sort(function(e,t){return e.order-t.order}),e.setState({circuit:a,steps:a.Steps,viewport:l}),a.id_circuit=t}).catch(function(){console.log("Oups, une erreur s'est produite")})}},{key:"render",value:function(){var e=this.state,t=e.steps,a=e.stepFocus,n=e.circuit,i=e.circuitIsDisplayed,l=e.stepIsDisplayed,o=e.userPosition,c=e.viewport,s=this.props.history;return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement(ie,{className:"new-map",steps:t,onClickMap:this.handleClickMap,onClickMarker:this.onClickItem,userPosition:o,viewport:c,changeViewport:this.changeViewport}),r.a.createElement("div",{className:"scroll-menu"},r.a.createElement("div",{className:"circuit-title"},r.a.createElement("h3",null,n.name),r.a.createElement(F.a,{className:"update-circuit-button",onClick:this.displayUpdateCircuit,color:"info"},"Modifier")),r.a.createElement(ge.a,{onDragEnd:this.dragEnd},r.a.createElement(ye,{items:t,onClickItem:this.onClickItem,stepFocus:a}))),r.a.createElement("p",{className:"come-back-button",onClick:function(){return s.goBack()}},"Valider"),r.a.createElement(Te,{step:a,removeStep:this.removeStep,updateStep:this.updateStep,show:l,displayUpdateStep:this.displayUpdateStep}),r.a.createElement(Fe,{circuit:n,show:i,displayUpdateCircuit:this.displayUpdateCircuit,updateCircuit:this.updateCircuit}))}}]),t}(n.Component),ze=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Circuits accomplis"))}}]),t}(n.Component),Ue=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Mes favoris"))}}]),t}(n.Component),Ve=a(426),Qe=a(106),Be=a(422),$e=a(423),He=a(101),Re=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={circuit:[]},a.componentDidMount=function(){var e=a.props.match.params.id;W.get("circuit/".concat(e)).then(function(e){a.setState({circuit:e})}).catch(function(){console.log("Oups, une erreur s'est produite")})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.circuit,t=e.name,a=e.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header-wrapper"},r.a.createElement("div",{className:"name-score"},r.a.createElement("h1",null,t),r.a.createElement("div",{className:"rating-wrapper"},r.a.createElement(Ve.a,{disabled:!0,defaultValue:4}),r.a.createElement("p",null,"(256)"))),r.a.createElement(Qe.a,{type:"primary",className:"favoris-button"},"Favoris")),r.a.createElement("div",{className:"bottom-wrapper"},r.a.createElement("div",{className:"circuit-infos"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}})),r.a.createElement("div",{className:"circuit-comments"},r.a.createElement("h2",{className:"comments-title"},"Commentaires"),r.a.createElement(Be.a,{author:r.a.createElement("a",{href:"http://copainsdavant.linternaute.com/p/stevy-palarski-20002480"},"Stevy Palarski"),avatar:r.a.createElement($e.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Stevy Palarski"}),content:r.a.createElement("p",null,"J\u2018ai pris beaucoup de plaisir \xe0 effectuer ce circuit. Il m\u2018a permis de d\xe9couvrir le centre-ville de Strasbourg. Etant originaire de Caen, je n\u2018avais rarement eu l\u2018occasion de voir une aussi belle ville !"),datetime:r.a.createElement(He.a,null,r.a.createElement("span",null,"Il y a deux jours"))}))))}}]),t}(n.Component);g.b.add(v.c,v.b,v.a);var qe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isConnected:!1,user:{}},a.login=function(e,t){return W.post(e,t).then(function(e){localStorage.setItem("token",e.token),a.setState({isConnected:!0,user:e.user})})},a.logout=function(){localStorage.removeItem("token"),a.setState({isConnected:!1,user:{}})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&W.get("whoami").then(function(t){e.setState({user:t,isConnected:!0})}).catch(function(){localStorage.removeItem("token"),console.log("Oups, une erreur s'est produite")})}},{key:"render",value:function(){var e=this.state,t=e.isConnected,a=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-wrapper"},r.a.createElement(Z,{isConnected:t,login:this.login,logout:this.logout})),r.a.createElement(f.a,{exact:!0,path:"/",component:fe}),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{exact:!0,path:"/account",render:function(e){return r.a.createElement(be,Object.assign({},e,{user:a}))}}),r.a.createElement(f.a,{exact:!0,path:"/circuits",component:he}),r.a.createElement(f.a,{exact:!0,path:"/circuit/:id",component:Le}),r.a.createElement(f.a,{exact:!0,path:"/achievements",component:ze}),r.a.createElement(f.a,{exact:!0,path:"/todo",component:Ue})):null,r.a.createElement(f.a,{exact:!0,path:"/detail/:id",component:Re}))}}]),t}(n.Component),Ge=Object(b.a)(qe);a(399),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Je={timeout:1500,transition:"fade",position:c.b.TOP_CENTER,containerStyle:{zIndex:1031}};l.a.render(r.a.createElement(o.a,null,r.a.createElement(c.a,Object.assign({template:s.a},Je),r.a.createElement(Ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[204,1,2]]]);
//# sourceMappingURL=main.3bd68244.chunk.js.map