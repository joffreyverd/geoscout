(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){},54:function(e){e.exports={version:8,name:"Basic",metadata:{"mapbox:autocomposite":!0},sources:{mapbox:{url:"mapbox://mapbox.mapbox-streets-v7",type:"vector"}},sprite:"mapbox://sprites/mapbox/basic-v8",glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"#dedede"},interactive:!0},{id:"landuse_overlay_national_park",type:"fill",source:"mapbox","source-layer":"landuse_overlay",filter:["==","class","national_park"],paint:{"fill-color":"#d2edae","fill-opacity":.75},interactive:!0},{id:"landuse_park",type:"fill",source:"mapbox","source-layer":"landuse",filter:["==","class","park"],paint:{"fill-color":"#d2edae"},interactive:!0},{id:"waterway",type:"line",source:"mapbox","source-layer":"waterway",filter:["all",["==","$type","LineString"],["in","class","river","canal"]],paint:{"line-color":"#a0cfdf","line-width":{base:1.4,stops:[[8,.5],[20,15]]}},interactive:!0},{id:"water",type:"fill",source:"mapbox","source-layer":"water",paint:{"fill-color":"#a0cfdf"},interactive:!0},{id:"building",type:"fill",source:"mapbox","source-layer":"building",paint:{"fill-color":"#d6d6d6"},interactive:!0},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","tunnel"]]],type:"line",source:"mapbox",id:"tunnel_minor",paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]},"line-dasharray":[.36,.18]},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","tunnel"]]],type:"line",source:"mapbox",id:"tunnel_major",paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]},"line-dasharray":[.28,.14]},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["in","structure","none","ford"]]],type:"line",source:"mapbox",id:"road_minor",paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["in","structure","none","ford"]]],type:"line",source:"mapbox",id:"road_major",paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_minor case",paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"butt","line-join":"miter"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_major case",paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_minor",paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,.25],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","bridge"]]],type:"line",source:"mapbox",id:"bridge_major",paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,.5],[20,30]]}},"source-layer":"road"},{interactive:!0,layout:{"line-cap":"round","line-join":"round"},filter:["all",["==","$type","LineString"],["all",["<=","admin_level",2],["==","maritime",0]]],type:"line",source:"mapbox",id:"admin_country",paint:{"line-color":"#8b8a8a","line-width":{base:1.3,stops:[[3,.5],[22,15]]}},"source-layer":"admin"},{interactive:!0,minzoom:5,layout:{"icon-image":"{maki}-11","text-offset":[0,.5],"text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":8,"text-anchor":"top","text-size":11,"icon-size":1},filter:["all",["==","$type","Point"],["all",["==","scalerank",1],["==","localrank",1]]],type:"symbol",source:"mapbox",id:"poi_label",paint:{"text-color":"#666","text-halo-width":1,"text-halo-color":"rgba(255,255,255,0.75)","text-halo-blur":1},"source-layer":"poi_label"},{interactive:!0,layout:{"symbol-placement":"line","text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-transform":"uppercase","text-letter-spacing":.1,"text-size":{base:1.4,stops:[[10,8],[20,14]]}},filter:["all",["==","$type","LineString"],["in","class","motorway","primary","secondary","tertiary","trunk"]],type:"symbol",source:"mapbox",id:"road_major_label",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":2},"source-layer":"road_label"},{interactive:!0,minzoom:8,layout:{"text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":6,"text-size":{stops:[[6,12],[12,16]]}},filter:["all",["==","$type","Point"],["in","type","town","village","hamlet","suburb","neighbourhood","island"]],type:"symbol",source:"mapbox",id:"place_label_other",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"place_label"},{interactive:!0,layout:{"text-field":"{name_en}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-max-width":10,"text-size":{stops:[[3,12],[8,16]]}},maxzoom:16,filter:["all",["==","$type","Point"],["==","type","city"]],type:"symbol",source:"mapbox",id:"place_label_city",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"place_label"},{interactive:!0,layout:{"text-field":"{name_en}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-max-width":10,"text-size":{stops:[[3,14],[8,22]]}},maxzoom:12,filter:["==","$type","Point"],type:"symbol",source:"mapbox",id:"country_label",paint:{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"country_label"}]}},55:function(e,t,a){e.exports=a(75)},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(23),i=a.n(l),o=a(95),c=(a(60),a(10)),s=a(11),u=a(13),p=a(12),d=a(14),m=a(93),h=a(96),f=a(29),g=a(35),y=(a(40),a(87)),b=a(88),v=a(89),E=a(90),C=a(51),O=a(82),k=a(83),w=a(85),j=a(91),x=a(84),S=a(30),M=a(94),_=a(86),N=a(17),D=a(76),A=a(77),I=a(78),B=a(79),F=a(80),P=a(81),T=a(48),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){a.props.login("signin",a.state).then(function(){a.props.displayModal()}).catch(function(e){console.log(e)})},a.state={email:"",password:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=this.props.displayModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Email"),r.a.createElement(F.a,{type:"email",name:"email",placeholder:"Indiquez votre email",value:t,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Mot de passe"),r.a.createElement(F.a,{type:"password",name:"password",placeholder:"Indiquez votre mot de passe",value:a,onChange:this.handleChange})))),r.a.createElement(P.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.handleSubmit},"Connexion"),r.a.createElement(T.a,{color:"secondary",onClick:n},"Annuler")))}}]),t}(n.Component),L=Object(h.a)(z),q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={firstname:"",lastname:"",email:"",password:"",repeatPassword:""},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object.assign({},a.state);delete e.repeatPassword,a.props.login("signup",e).then(function(e){}).catch(function(e){})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.lastname,n=e.email,l=e.password,i=e.repeatPassword,o=this.props.displayModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Nom"),r.a.createElement(F.a,{type:"text",name:"lastname",onChange:this.handleChange,value:a})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Pr\xe9nom"),r.a.createElement(F.a,{type:"text",name:"firstname",onChange:this.handleChange,value:t})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Email"),r.a.createElement(F.a,{type:"email",name:"email",onChange:this.handleChange,value:n})),r.a.createElement(B.a,null,"Mot de passe"),r.a.createElement(I.a,null,r.a.createElement(F.a,{type:"password",name:"password",placeholder:"8 caract\xe8res minimum",onChange:this.handleChange,value:l})),r.a.createElement(I.a,null,r.a.createElement(F.a,{type:"password",name:"repeatPassword",placeholder:"R\xe9p\xe9tez votre mot de passe",onChange:this.handleChange,value:i})))),r.a.createElement(P.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.handleSubmit},"Inscription"),r.a.createElement(T.a,{color:"secondary",onClick:o},"Annuler")))}}]),t}(n.Component),$=Object(h.a)(q),U=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).displayModal=function(){a.setState(function(e){return{modal:!e.modal}})},a.displayDropdownAccount=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})};var n=a.props.isConnected;return a.state={modal:!1,registerByDefault:!0,isConnected:n,dropdownOpen:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isConnected,n=t.modal,l=t.registerByDefault,i=t.dropdownOpen,o=this.props,c=o.login,s=o.logout;return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(C.a,{nav:!0,direction:"left",isOpen:i,toggle:this.displayDropdownAccount},r.a.createElement(O.a,{nav:!0},r.a.createElement(S.a,{icon:"user",className:"user-icon"})),r.a.createElement(k.a,null,r.a.createElement(x.a,{to:"/account"},r.a.createElement(w.a,null,"Mon compte")),r.a.createElement(x.a,{to:"/",onClick:s},r.a.createElement(w.a,null,"D\xe9connexion")))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onClick:this.displayModal,icon:"user",className:"user-icon"}),r.a.createElement(M.a,{isOpen:n,fade:!1,toggle:this.displayModal},r.a.createElement("div",{className:"modal-header"},r.a.createElement(_.a,{className:!0===l?"active":"",onClick:function(){return e.setState({registerByDefault:!0})}},"Inscription"),r.a.createElement(_.a,{className:!0===l?"":"active",onClick:function(){return e.setState({registerByDefault:!1})}},"Connexion")),l?r.a.createElement($,{displayModal:this.displayModal,modal:n,login:c}):r.a.createElement(L,{displayModal:this.displayModal,modal:n,login:c}))))}}]),t}(r.a.Component),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={responsiveNavBarMode:!1,dropdownOpen:!1},a.toggle=function(){a.setState(function(e){return{responsiveNavBarMode:!e.responsiveNavBarMode}})},a.displayDropdownCircuits=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.responsiveNavBarMode,a=e.dropdownOpen,n=this.props,l=n.isConnected,i=n.login,o=n.logout;return r.a.createElement("div",null,r.a.createElement(y.a,{expand:"md",fixed:"top"},r.a.createElement(x.a,{to:"/"},r.a.createElement("img",{src:"/img/logoGeoScoutWhite.png",className:"logo",alt:"GeoScout"})),r.a.createElement(b.a,{onClick:this.toggle}),l?r.a.createElement(v.a,{responsiveNavBarMode:t,navbar:!0},r.a.createElement(E.a,{className:"ml-auto",navbar:!0},r.a.createElement(C.a,{nav:!0,isOpen:a,toggle:this.displayDropdownCircuits},r.a.createElement(O.a,{nav:!0,caret:!0},"Circuits"),r.a.createElement(k.a,null,r.a.createElement(x.a,{to:"/circuits"},r.a.createElement(w.a,null,"Cr\xe9\xe9s")),r.a.createElement(x.a,{to:"/achievements"},r.a.createElement(w.a,null,"R\xe9alis\xe9s")),r.a.createElement(x.a,{to:"/todo"},r.a.createElement(w.a,null,"Ma liste")))),r.a.createElement(U,{isConnected:l,logout:o}))):r.a.createElement(v.a,{responsiveNavBarMode:t,navbar:!0},r.a.createElement(E.a,{className:"flex-end",navbar:!0},r.a.createElement(j.a,null,r.a.createElement(U,{isConnected:l,login:i}))))))}}]),t}(r.a.Component),R=a(31),V=a(53),G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.index,n=8,l={cursor:"pointer",fill:this.props.color,stroke:"none"};return 11===a?n=6:a>9?n=5:1!==a&&7!==a||(n=9),r.a.createElement("svg",{height:25,viewBox:"0 0 24 24",style:Object(V.a)({},l),onClick:t},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}),r.a.createElement("text",{x:n,y:15,fill:"white",fontSize:13},a))}}]),t}(n.PureComponent),J=a(54),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={viewport:{width:"100%",height:window.innerHeight-50,latitude:48.582651,longitude:7.749534,zoom:12}},a.centerFirstSteps=function(){var e=a.props.steps,t=a.state.viewport;t.latitude=e[0].latitude,t.longitude=e[0].longitude,a.setState({viewport:t})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a=e.state.viewport;a.latitude=t.coords.latitude,a.longitude=t.coords.longitude,e.setState({viewport:a,userPosition:t.coords})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.steps,n=t.circuits,l=t.onClickMap,i=t.onClickMarker,o=t.className,c=this.state,s=c.viewport,u=c.userPosition;return r.a.createElement("div",{className:o},r.a.createElement(R.b,Object.assign({mapboxApiAccessToken:"pk.eyJ1IjoidHVudGVyZmluZ2VyIiwiYSI6ImNqcncxOTkwdDA3YW00M3BrY3A0MTAyd3kifQ.Mby6nOzqK6Tkzm1CwRfdDw"},s,{mapStyle:J,onViewportChange:function(t){return e.setState({viewport:t})},onClick:l}),u&&r.a.createElement(R.a,{latitude:u.latitude,longitude:u.longitude,offsetLeft:-10,offsetTop:-20},r.a.createElement(G,{color:"#cc0000"})),a&&a.map(function(e,t){return r.a.createElement(R.a,{key:e.id_step,latitude:e.latitude,longitude:e.longitude,offsetLeft:-11,offsetTop:-25},r.a.createElement(G,{color:"#1f7a1f",index:e.order,onClick:function(){return i(e)}}))}),n&&n.map(function(e,t){return e.latitude&&e.longitude?r.a.createElement(R.a,{key:t,latitude:e.latitude,longitude:e.longitude,offsetLeft:-11,offsetTop:-25},r.a.createElement(G,{color:"#0066cc",onClick:function(){return i(e)}})):null})))}}]),t}(r.a.Component),Y="http://154.49.211.218:5555/";function H(e,t,a){var n={method:t,headers:{"Content-Type":"application/json"}};return localStorage.getItem("token")&&(n.headers.authorization="Bearer ".concat(localStorage.getItem("token"))),a&&(n.body=JSON.stringify(a)),fetch(Y+e,n).then(Z)}function Z(e){return e.ok?204===e.status?Promise.resolve():Promise.resolve(e.json()):Promise.reject({code:e.status,text:e.text})}var K={get:function(e){return H(e,"GET")},post:function(e,t){return H(e,"POST",t)},put:function(e,t){return H(e,"PUT",t)},delete:function(e){return H(e,"DELETE")}},X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={circuits:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;K.get("circuits").then(function(t){e.setState({circuits:t})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state.circuits;return r.a.createElement(W,{className:"map",circuits:e})}}]),t}(n.Component),ee=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Mon compte"))}}]),t}(n.Component),te=a(92),ae=Object(h.a)(function(e){var t,a=e.id_circuit,n=e.name,l=e.description,i=e.length,o=e.duration,c=e.published,s=e.version,u=e.level,p=e.history;switch(u){case"1":t="medium";break;case"2":t="hard";break;default:t="easy"}return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"list-item",onClick:function(){return p.push("circuit/".concat(a))}},r.a.createElement("h3",{className:"item-name"},n),r.a.createElement("p",null,l&&l),r.a.createElement("p",null,i&&"".concat(i," km")),r.a.createElement("p",null,o&&"".concat(i," heures")),r.a.createElement("p",{className:"version-item"},s&&"Version : ".concat(s)),r.a.createElement(S.a,{icon:"align-justify",className:"published-item",color:1==c?"#27ae60":"white"}),r.a.createElement("span",{className:"level-item ".concat(t)})))}),ne=function(e){var t=e.items,a=void 0===t?[]:t;return r.a.createElement("ul",{className:"item-wrapper"},a.map(function(e){return r.a.createElement(ae,Object.assign({key:e.id_circuit},e))}))},re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=a.state.name,t=a.props.displayModal;K.post("circuit",{name:e}).then(function(e){t(),a.props.history.push("/circuit/".concat(e.id_circuit))}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.name,t=this.props,a=t.modal,n=t.displayModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{isOpen:a,fade:!1,toggle:n},r.a.createElement(_.a,null,"Nouveau circuit"),r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Nom"),r.a.createElement(F.a,{type:"text",name:"name",value:e,onChange:this.handleChange})))),r.a.createElement(P.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.handleSubmit},"Cr\xe9er"),r.a.createElement(T.a,{color:"secondary",onClick:n},"Annuler"))))}}]),t}(n.Component),le=Object(h.a)(re),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={dropdownOpen:!1,filter:"Tous",modal:!1,circuits:[]},a.toggle=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.displayModal=function(){a.setState(function(e){return{modal:!e.modal}})},a.onFilterClick=function(e){a.setState({filter:e.target.name})},a.componentDidMount=function(){K.get("my-circuits").then(function(e){a.setState({circuits:e})}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.dropdownOpen,a=e.modal,n=e.filter,l=e.circuits,i="Publi\xe9s"===n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-circuits-header"},r.a.createElement("h1",null,"Circuits cr\xe9\xe9s"),r.a.createElement("div",{className:"header-buttons"},r.a.createElement(te.a,{direction:"left",className:"button-dropdown",isOpen:t,toggle:this.toggle},r.a.createElement(O.a,{caret:!0,color:"info"},n),r.a.createElement(k.a,null,r.a.createElement(w.a,{name:"Tous",onClick:this.onFilterClick},"Tous"),r.a.createElement(w.a,{name:"Publi\xe9s",onClick:this.onFilterClick},"Publi\xe9s"),r.a.createElement(w.a,{name:"Non-publi\xe9s",onClick:this.onFilterClick},"Non-publi\xe9s"))),r.a.createElement(T.a,{color:"success",className:"create-circuit",onClick:this.displayModal},"Cr\xe9ation"))),"Tous"===n?r.a.createElement(ne,{items:l}):r.a.createElement(ne,{items:l.filter(function(e){return e.published===i})}),r.a.createElement(le,{displayModal:this.displayModal,modal:a}))}}]),t}(n.Component),oe=function(e){var t=e.step,a=e.onClickItem,n=e.handleDrop;return r.a.createElement("li",{className:"step-wrapper-item",draggable:!0,onClick:function(){return a(t)},onDragStart:function(e){return function(e,t){e.dataTransfer.setData("id",t.id_step),e.dataTransfer.setData("order",t.order)}(e,t)},onDragOver:function(e){e.preventDefault()},onDrop:function(e){return n(e,t.order)}},r.a.createElement("div",null,r.a.createElement("span",{className:"step-name"},t.name)),r.a.createElement("div",null,r.a.createElement("span",null,t.description)),r.a.createElement("span",{className:"order-item"},t.order))};var ce=function(e){var t=e.items,a=void 0===t?[]:t,n=e.onClickItem,l=e.handleDrop;return r.a.createElement("ul",{className:"step-wrapper"},a.map(function(e){return r.a.createElement(oe,{key:e.order,step:e,onClickItem:n,handleDrop:l})}))},se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",description:"",instruction:"",questions:{wording:"",response:""}},a.fetchQuestion=function(e){K.get("step/".concat(e,"/questions")).then(function(e){e.length>0&&a.setState({questions:{id:e[0].id_question||void 0,wording:e[0].wording||"",response:e[0].response||""}})})},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handleChangeQuestion=function(e){e.persist(),a.setState(function(t){return t.questions[e.target.name]=e.target.value,{questions:t.questions}})},a.handleSubmit=function(){var e=a.state,t=a.props.displayModal;a.props.updateStep(e).then(function(){a.putQuestion(e.questions),t()}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.step;e.step!==t&&t&&(this.setState(Object.assign({},t,{description:t.description||"",instruction:t.instruction||""})),this.fetchQuestion(t.id_step))}},{key:"putQuestion",value:function(e){return e.id?K.put("question/".concat(e.id),e):K.post("question",Object.assign({id_step:this.state.id_step},e))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,n=e.instruction,l=e.questions,i=l.wording,o=l.response,c=this.props,s=c.open,u=c.displayModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{isOpen:s,fade:!1,toggle:u},r.a.createElement(_.a,null,"Modification de l'\xe9tape"),r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Nom"),r.a.createElement(F.a,{type:"text",name:"name",value:t,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Description"),r.a.createElement(F.a,{type:"text",name:"description",value:a,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Instruction de direction"),r.a.createElement(F.a,{type:"textarea",name:"instruction",value:n,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Intitul\xe9 de la question"),r.a.createElement(F.a,{type:"textarea",name:"wording",value:i,onChange:this.handleChangeQuestion})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"R\xe9ponse"),r.a.createElement(F.a,{type:"text",name:"response",value:o,onChange:this.handleChangeQuestion})))),r.a.createElement(P.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.handleSubmit},"Modifier"),r.a.createElement(T.a,{color:"secondary",onClick:u},"Annuler"))))}}]),t}(n.Component),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",description:"",length:"",duration:""},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=a.state,t={id_circuit:e.id_circuit,name:e.name||null,description:e.description||null,length:e.length||null,duration:e.duration||null},n=a.props.displayModal;a.props.updateCircuit(t).then(function(){return n()}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.circuit;e.circuit!==t&&t&&this.setState(Object.assign({},t,{description:t.description||"",instruction:t.instruction||"",length:t.length||"",duration:t.duration||""}))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,n=e.length,l=e.duration,i=this.props,o=i.open,c=i.displayModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{isOpen:o,fade:!1,toggle:c},r.a.createElement(_.a,null,"Modification du circuit"),r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Nom"),r.a.createElement(F.a,{type:"text",name:"name",value:t,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Description"),r.a.createElement(F.a,{type:"textarea",name:"description",value:a,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Distance moyenne"),r.a.createElement(F.a,{type:"text",name:"length",value:n,onChange:this.handleChange})),r.a.createElement(I.a,null,r.a.createElement(B.a,null,"Dur\xe9e moyenne"),r.a.createElement(F.a,{type:"text",name:"duration",value:l,onChange:this.handleChange})))),r.a.createElement(P.a,null,r.a.createElement(T.a,{color:"primary",onClick:this.handleSubmit},"Modifier"),r.a.createElement(T.a,{color:"secondary",onClick:c},"Annuler"))))}}]),t}(n.Component),pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={circuit:{},steps:[],modalOpen:!1,updateCircuitModalOpen:!1},a.displayModal=function(){a.setState(function(e){return{modalOpen:!e.modalOpen}})},a.displayUpdateCircuitModal=function(){a.setState(function(e){return{updateCircuitModalOpen:!e.updateCircuitModalOpen}})},a.onClickItem=function(e){a.setState({stepFocus:e}),a.displayModal()},a.handleClickMap=function(e){var t=a.state.circuit,n={name:"Etape",longitude:e.lngLat[0],latitude:e.lngLat[1],id_circuit:t.id_circuit};K.post("step",n).then(function(e){a.setState(function(t){return t.steps.push(e),{steps:t.steps}})}).catch(function(e){return console.log(e.text)})},a.removeStep=function(e){var t=a.state.steps[e];K.delete("step/".concat(t.id_step)).then(function(){a.setState(function(t){return t.steps.splice(e,1),{steps:t.steps}})}).catch(function(e){return console.log(e.text)})},a.updateStep=function(e){return K.put("step/".concat(e.id_step),e).then(function(){a.setState(function(t){t.steps.splice(e.order,1,e)})})},a.updateCircuit=function(e){return K.put("circuit/".concat(e.id_circuit),e).then(function(){a.setState({circuit:e})})},a.handleDropStep=function(e,t){e.dataTransfer.getData("id");var n=e.dataTransfer.getData("order");a.changeStepOrder(n,t)},a.changeStepOrder=function(e,t){a.setState(function(a){var n=a.steps.map(function(a){return a.order==e?a.order=t:t<=a.order&&a.order<e?a.order+=1:a.order>e&&a.order<=t&&(a.order-=1),a});return n.sort(function(e,t){return e.order-t.order}),{steps:n}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t&&K.get("circuit/".concat(t)).then(function(a){K.get("steps/".concat(t)).then(function(t){e.setState({circuit:a,steps:t})})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.steps,a=e.circuit,n=e.stepFocus,l=e.modalOpen,i=e.updateCircuitModalOpen;return r.a.createElement("div",{className:"view-wrapper"},r.a.createElement(W,{className:"new-map",steps:t,onClickMap:this.handleClickMap,onClickMarker:this.onClickItem}),r.a.createElement("div",{className:"scroll-menu"},r.a.createElement("div",{className:"circuit-title"},r.a.createElement("h3",null,a.name),r.a.createElement(T.a,{className:"update-circuit",color:"info",onClick:this.displayUpdateCircuitModal},"Modifier")),r.a.createElement(ce,{items:t,onClickItem:this.onClickItem,handleDrop:this.handleDropStep})),r.a.createElement(se,{step:n,open:l,displayModal:this.displayModal,updateStep:this.updateStep}),r.a.createElement(ue,{circuit:a,open:i,displayModal:this.displayUpdateCircuitModal,updateCircuit:this.updateCircuit}))}}]),t}(n.Component),de=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Circuits r\xe9alis\xe9s"))}}]),t}(n.Component),me=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Ma liste"))}}]),t}(n.Component);f.b.add(g.c,g.b,g.a);var he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isConnected:!1,user:{}},a.login=function(e,t){return K.post(e,t).then(function(e){localStorage.setItem("token",e.token),a.setState({isConnected:!0,user:e.user})})},a.logout=function(){localStorage.removeItem("token"),a.setState({isConnected:!1,user:{}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&K.get("whoami").then(function(t){e.setState({user:t,isConnected:!0})}).catch(function(e){console.log(e),localStorage.removeItem("token")})}},{key:"render",value:function(){var e=this.state,t=e.isConnected,a=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-wrapper"},r.a.createElement(Q,{isConnected:t,login:this.login,logout:this.logout})),r.a.createElement(m.a,{exact:!0,path:"/",component:X}),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{exact:!0,path:"/account",render:function(e){return r.a.createElement(ee,Object.assign({},e,{user:a}))}}),r.a.createElement(m.a,{exact:!0,path:"/circuits",component:ie}),r.a.createElement(m.a,{exact:!0,path:"/circuit/:id",component:pe}),r.a.createElement(m.a,{exact:!0,path:"/achievements",component:de}),r.a.createElement(m.a,{exact:!0,path:"/todo",component:me})):null)}}]),t}(n.Component),fe=Object(h.a)(he);a(74),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,1,2]]]);
//# sourceMappingURL=main.7586fae9.chunk.js.map